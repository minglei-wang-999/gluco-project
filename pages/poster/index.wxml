<!-- Poster Preview -->
<view class="page-container">
  <!-- Custom Navigation Bar -->
  <view class="nav-bar" style="padding-top: {{statusBarHeight}}px;">
    <view class="nav-bar-content" style="height: {{navBarHeight}}px;">
      <view class="back-btn" bindtap="onBack">
        <text class="back-icon">←</text>
      </view>
      <!-- Add an empty view for flex spacing -->
      <view class="placeholder-btn"></view>
    </view>
  </view>

  <scroll-view 
    scroll-y="true" 
    class="scroll-container" 
    enhanced="true"
    show-scrollbar="false"
    bounces="true"
    style="margin-top: {{statusBarHeight + navBarHeight}}px; height: calc(100vh - {{statusBarHeight + navBarHeight}}px);">
    <view class="snapshot-wrapper">
      <snapshot id="meal-poster" wx:if="{{showPoster}}">
        <view class="poster-container">
          <image class="background-image" src="/images/posters/poster-2.jpeg" mode="aspectFill"/>
          <view class="poster-content">
            <!-- Top Section with Branding -->
            <!--<view class="top-section">
              <view class="branding">
                <image class="app-logo" src="/images/logo.png" mode="aspectFit"/>
              </view>
            </view>-->
            <view class="circular-meal-image">
              <image src="{{displayImage}}" mode="aspectFill"/>
            </view>

            <view class="center-gl">
              <text class="gl-label {{mealData.gl > 20 ? 'gl-high' : (mealData.gl > 10 ? 'gl-medium' : 'gl-low')}}">升糖负荷</text>
              <text class="gl-value {{mealData.gl > 20 ? 'gl-high' : (mealData.gl > 10 ? 'gl-medium' : 'gl-low')}}">{{mealData.gl}}</text>
            </view>

            <!-- Nutrition Info Below GL -->
            <view class="nutrition">
              <view class="nutrition-item">
                <text class="label">碳水</text>
                <text class="value">{{mealData.carbs}}g</text>
              </view>
              <view class="nutrition-item">
                <text class="label">脂肪</text>
                <text class="value">{{mealData.fat}}g</text>
              </view>
              <view class="nutrition-item">
                <text class="label">蛋白质</text>
                <text class="value">{{mealData.protein}}g</text>
              </view>
            </view>

            <!-- Start Using Button at Bottom Left -->
            <view class="start-using-section">
              <view class="start-using-button" bindtap="onStartUsing">
                <text class="start-using-text">点击开始使用</text>
              </view>
            </view>

            <!-- QR Code at Bottom Right -->
            <view class="qr-section">
              <image class="qr-code" src="{{qrCodeUrl}}" mode="aspectFit"/>
            </view>
          </view>
        </view>
      </snapshot>
    </view>
  </scroll-view>
</view> 